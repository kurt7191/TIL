# 데이터베이스구조와운용(2)





> 들어가기전
>
> 
>
> - erd 다이아그램을 작성해새 설계만 보여주면 안됨, 그 앞장에 요구사항을 적어줘야함. ex) 대학교 부서, booking.com
>
> - 중간 발표는 9주차에
> - 기말에는 sql 문제가 많이 나올 듯, 중간고사는 배웠던 챕터들을 위주로 공부하면 될 거 같음



<hr>



### 2장. 데이터베이스 관리 시스템





기존의 파일 시스템 vs 데이터베이스 관리 시스템

-> 이 맹점을 알아야 왜 데이터베이스를 쓰는지 알 수 있다.



##### 데이터 베이스 발전 과정



> 2세대 : erd 로 설계하고 그대로 데이터 집어넣음
>
> 4세데 : 미리 다 설계를 하진 않음. 왜냐하면 데이터가 너무 많이 들어오기 때문에, 그래서 요즘에는 데이터 웨어하우스 말고 데이터 레이크가 대두가 되고 있음.





### 2-1)파일 시스템(file system)



##### 2-1-1)문제점 



 silo 현상 => 데이터가 다 따로따로 있는 것.

ex) 병원 : 고객 데이터, 약 데이터, 진료 관련 데이터

고객 데이터 파일과 진료 관련 데이터가 따로 있다고 과정해보자. 이때 고객의 정보가 진료에도 들어가야 되는 것임. 누가 감기치료를 받았는지 진료 데이터 파일에서 알기 위해서는 고객에 대한 데이터가 필요함. 



이렇게 되면 고객 데이터와 진료 데이터 두 개에 똑같은 데이터가 쌓이는 것이기 때문에 비용이 더 많이 들게 되는 것.



***즉, 파일 데이터는 데이터간 중복 문제와 연결 문제 발생.***



***문제점 정리***



1) ***여러 파일에 데이터 중복 저장***
   - 저장 공간의 낭비, 데이터의 일관성과 무결성을 유지하기 힘듬
2) ***응용 프로그램이 데이터 파일에 종속적***
   - 데이터 저장 구조를 변경시키면, 그와 관련된 응용 프로그램도 함께 변경했어야 했다. 예를 들어서 고객파일에 나이칼럼을 집어 넣으면, 그와 관련된 응용 프로그램도 수정해야함
3) 데이터 파일에 대한 동시 공유, 보안, 회복 기능 부족
4) 응용 프로그램 개발이 쉽지 않음



##### 2-1-2) 문제점 해결책 DB



따라서 데이터를 통합할 필요가 있음. DB 필요. DB는 중복방지 -> 일관성 -> 무결성 치료 가능



> 잠시 용어 정리!
>
>  DB => DataBase
>
> DBMS => DataBase 는 데이터 베이스를 관리해주는 프로그램



하지만 여전히 silo 현상이 많이 있음(중복성->비용,일관성,무결성, 응용프로그램 문제) 왜냐하면 여전히 각각의 부서에 관한 db 가 따로따로 있음.



### 2-2) 데이터베이스 관리 시스템의 장단점



데이터 베이스 관리 기능



1. 정의 : 데이터베이스 구조를 정의하거나 수정할 수 있다.
2. 조작 : 데이터를 삽입,, 삭제, 수정, 검색하는 연산을 할 수 있다.
3. 제어 : 데이터를 항상 정확하게



##### 2-2-1)장점 

데이터 중복을 통제할 수 있다.

데이터 독립성이 확보

데이터를 동시 공유 가능

데이터 보안이 향상

데이터 무결성을 유지 가능

표준화 가능

장애 발생 시 회복이 가능

응용 프로그램 개발 비용이 줄어듬



##### 2-2-2)단점

비용이 많이 든다.

중앙 관리라 어찌보면 보안이 약함

백업과 회복 방법이 복잡



### 2-3)데이터베이스 관리 시스템의 발전 과정



2세대 : 관계 DBMS

ex) 오라클, ms sql 서버, 액세스, 인포믹스, MySQL



3세대 : 객체지향 DBMS, 객체관계



4세대: NoSQL , NewSQL DBMS

NoSQL 은 비정형 데이터를 처리하는데 적합하고 확장성이 뛰어나다

- 안정성과 일관성 유지를 위한 복잡한 기능을 포기
- 데이터 구조를 미리 정해두지 않는 유연성
- 확장성이 뛰어나 여러 대의 컴퓨터에 데이터를 분산 저장

EX) 몽고디비 등등



### 2-4) 데이터베이스의 구조



>  여기서부터 외워야 됨!



##### 2-4-1)

1. 스키마 (schema)
   - 데이터베이스에 저장되는 ***데이터 구조***와 ***제약조건***을 정의한 것
2. 인스턴스(instance)
   - 스키마에 따라 데이터베이스에 ***실제로 저장된 값***



##### 2-4-2)3단계 데이터베이스 구조



1. 외부단계 : 개별 사용자 관점 (굉장히 간단하게 추상화)
   - ex>집주인 관점

2. 개념 단계 : 조직 전체의 관점 ()
   - 관리인 관점

3. 내부 단계 : 물리적인 저장 장치의 관점
   - 건설 업체 관점



1. 외부단계
   - 개별 사용자 관점에서 이해하고 표현하는 단계임
   - 데이터베이스 하나에 외부 스키마가 여러 개 존재할 수 있음
   - 요구사항을 파악
2. 개념 단계
   - 조직 전체의 관점에서 표현하는 단계
   - 데이터베이스 하나에 개념 스키마가 하나만 존재함
     - 개념 스키마
       - 어떤 데이터가 저장되는지, 데이터들 간에는 어떤 관계?, 어떤 제약조건이 있는지에 대한 정의 + 보안정책이나 접근 권한 등등
3. 내부 단계
   - 저장 장치의 관점에서 이해하고 표현하는 단계
   - 데이터베이스 하나에 내부 스키마가 하나만 존재
     - 내부 스키마
       - 실제로 저장되는 방법을 정의한 것
       - 레코드 구조, 필드 크기, 레코드 접근 경로 등 물리적 저장 구조를 정의



##### 2-4-2)3단계 데이터베이스 구조의 사상 또는 매핑



- 스키마 사이의 대응 관계
  - 앞의 세 가지 스키마를 연결해주는 사상들



##### 2-4-3)데이터 독립성

왜 이렇게 3단계로 구분을 했는가?



1. 논리적 데이터 독립성
2. 물리적 데이터 독립성



##### 2-4-4)데이터 사전



데이터에 관한 정보임, 칼럼이 무슨 칼럼인지에 대한 설명 등등

스키마, 사상 정보, 다양한 제약조건 등을 저장한 것.



##### 2-4-5)데이터 디렉터리



데이터 사전에 있는 데이터에 실제로 접근하는 데 필요한 위치 정보를 저장



##### 2-4-6)사용자 데이터베이스

사용자가 실제로 사용하는 데이터 베이스



##### 2-4-7)데이터베이스 사용자



1. 데이터베이스 관리자

   - 데이터베이스 시스템을 운영하고 관리

   - db 시스템 운영 및 관리하는 사람

   - 정의어와 데이터 제어어를 이용

   - 주요 업무

     

     저장 구조와 접근 방법 결정

     스키마 정의

     제약 조건 정의

2. 최종 사용자 = 일반 사용자

   - 데이터베이스에 접근하여 데이터를 조작하는 사람

3. 응용 프로그래머

   - 개발자 관점





##### 2-4-8)데이터 언어



DDL(정의어) 

DML(조작어)

DCL(제어어)



### 2-5 데이터베이스 관리 시스템의 구성



그림 3-11 





# 3. 데이터 모델링



### 3 -1)데이터 모델링과 데이터 모델의 개념

- 1. 개념적 데이터 모델
  2. 논리적 데이터 모델





##### 3-1-1) 데이터 모델링

현실 세계에 존재하는 데이터를 컴퓨터 세계에 넣는 변환 작업



현실세계 -> 개념세계 -> 컴퓨터 세계



개념적 데이터 모델 => 개체 ->개념

논리적 데이터 모델 => ERD



데이터 모델의 구성 : 데이터 구조, 연산, 제약조건



<HR>

개체(entity)



엔티티 중에서 key 엔티티가 중앙에 왔으면 좋겠다.





> 수업 듣는 방식 수정
>
> 교재 정리를 따로 하면서 용어나 개념 정리를 하고
>
> 수업을 들을 때는 수업에서 중요한 내용만 적자



속성(attribue)

개체가 가지고 있는 속성



학생 entity면 학생 이름, 나이, 성별, 전공



- 단일 값 속성
  - 이름
- 다중 값 속성
  - 연락처



> db를 설계 할때 엔티티와 속성을 영수증을 보는 걸로 하는 방법이 있음.



- 단순 속성
  - 의미를 더는 분해할 수 없는 속성
- 복합 속성
  - 주소 (의미를 분해할 수 있는 속성)
  - 생일(연월일로 분해 가능)



- 유도 속성
  - 가격은 총개수에 따라서 달라짐 이런게 유도 속성