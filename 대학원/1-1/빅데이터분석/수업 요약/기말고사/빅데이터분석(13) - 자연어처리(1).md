# 빅데이터분석(13) - 자연어처리



## 자연어 처리 개요



### 자연어 처리의 어려움



1. 언어의 중의성(Ambiguity)
   - "배" 라는 단어의 중의성
2. 문장의 중의성
   - "너 참 잘한다" -> 비꼰 것일수도 있다.
3. 규칙의 예외
4. 언어의 유연성과 확장성
   - 신조어 등등의 생성이나 기존 언어 의미의 변경
5. 언어 효과
   - 언어 고유의 특징들이 있음. 즉, 영어, 한국의 특징은 다름



<HR>

### 자연어처리 연구의 패러다임



1. 규칙 기반
   - 언어의 문법적인 규칙을 사전에 정의해두고 그것에 기반하여 자연어를 처리하는 방식
2. 통계 기반
   - 조건부 확률을 사용하여, 통계적으로 가장 자연스러운 단어가 무엇인지 확정
   - 앞의 단어들을 보고 ..
3. 기계학습 기반
   - 사전에 훈련 데이터를 만들어놓고 그것을 통해서 패턴을 찾는 것
   - 예를 들어서 감성분석을 할 때, 사전에 긍정, 부정 문장을 구분해 놓고 그것을 학습해서 새로운 문장이 들어왔을 때, 그 문장이 부정인지 긍정인지 파악하는 기법
4. 딥러닝



<HR>

### 자연어처리 관련 용어들



##### 코퍼스(CORPUS) => 말뭉치

문서들의 모음



1. 해당 문제와 관련된 모든 텍스트들
   - 우리가 관심있는 문서들의 집합을 CORPUS 라고 할 수 있다.
   - 하나의 문서는 하나의 ROW로 다룬다.
2. 하나의 코퍼스는 정적이지 않고 동적이다
   - 예를 들어서 기사들이 있으면 이게 코퍼스라고 할 수 있는데,
   - 기사는 계속해서 나오기 때문에 코퍼스는 정적이지 않고 확장이 된다.
3. 목적에 따라서는 문장 뿐만 아니라 문장에 대해 분석한 내용도 들어간다.
   - 예를 들어서 문장에 대한 감성 분석을 했다면 그 문장에 대한 긍정 부정에 대한 결과값이 코퍼스 내에 들어간다.



##### 음절(SYLLABLE)



1. 언어를 말하고 들을 때, 하나의 덩어리로 여겨지는 가장 작은 발화의 단위
   - 한글 : 한글자
   - 초성, 중성, 종성으로 이루어짐
   - 초성, 종성은 자음, 중성은 모음
   - 예 : 아=> 모음, 앗 => 모음 + 자음, 가=> 자음 + 모음, 갓 => 자음 + 모음 + 자음



##### 형태소(MORPHEME)



1. 의미를 가지는 가장 작은 단위
2. 쪼개면 더 이상 기능이나 의미를 가지지 않음
   - 예 : 컴퓨터, 컴,퓨,터 이렇게 나뉘면 의미를 가지지 않아서 형태소가 될 수 없음, 컴퓨터일 때 형태소라고 할 수 있다.
3. 실질 형태소
   - 어휘 형태소라고도 부름
   - 명사, 동사, 형용사, 부사에 해당하는 것
4. 형식 형태소
   - 문법 형태소라고도 부름
   - 조사라던지 어미를 의미한다.
5. 예를 들어서 :나는 컴퓨터가 좋다."
   - 나, 컴퓨터, 공부, 좋 => 실질 형태소
   - 는, 가,  다 => 형식 형태소



##### 어절



1. 한 개 이상의 형태소가 모여 구성된 단어
2. 예 : '나는' => 실질형태소와 형식 형태소가 묶여있음, 즉, 2개 이상의 형태소가 모임, 따라서 어절
3. 쉽게 생각해서 띄어쓰기라고 생각해도 된다.
4. 영어의 경우는 (WORD, TERM)이라고도 부른다.





>   자연어처리 용어들의 계층
>
> 코퍼스 > 문서 > 문장 > 어절 > 글자





##### 불용어(STOP WORDS)



1. 별다른 의미를 가지지 않는 단어들
   - 영어에서는 관사, 전치사 등등



##### 어간 추출(Stemming)



1. 단어의 어간(stem) 을 추출하는 과정
2. 어간은 추가적인 문법적 정보 없이 의미를 제공하는 기본 단어
3. base word, 또는 almost-word 라고 한다.
4. 예 : Stemming 에서 `Stem` 임
5. 영어는 과거, 동명사, 3인칭 변환 등등이 있는데, 이때 기본적 단어를 가져오는게 어간추출임



##### 단어 쌍(Word Pairs)



1. 2개 또는 3개 단어가 합쳐져서 하나의 의미를 갖는 경우
2. United States, The Who(락 그룹임)
3. The Who 같은 경우는 둘 다 불용어기 때문에 불용어처리(Stop Words) 하면 없어질수 있음.
4. 이때는 대문자인 경우에는 유지한다는 규칙을 넣는다던지 하여 유지시킴





##### 단어 사전(Lexicon)



단어들이 너무 많기 때문에, 모든 단어들을 분석 대상으로 넣는 것이 불편할 수 있다.

따라서 우리가 관심가지는 단어들만 모아놓은 사전을 만들기도 한다.

이러한 것을 Lexicon 이라고 부른다.



1. 대부분의 비즈니스 텍스트 마이닝 응용에서 한 가지 또는 그 이상의 사전 사용
2. 사전은 중요한 단어들의 목록 : 동의어들을 포함할 수 있다.
   - 예를 들어서 flig, fli 는 flight 를 의미하는 동의어다.
3. 틀린 철자(miss spelling)
   - 만일 철자가 틀린 단어들이 나올 경우 동의어로 등록하여 처리



##### 품사(Part of Speech, POS)

한글 : 5언 9품사



1. 어떤 단어가 어떤 역할을 하는지 또는 의미를 갖는지 부여해서 구분해주는 것
   - 한글의 경우 문장 내에서 해당 단어가 수행하는 역할을 기준으로 5언으로 구분
   - 체언, 수식언, 관계언, 독립언, 용언
2. 의미에 따라 9품사
   - 명사, 대명사,  수사, 관형사, 부사, 조사, 감탄사, 동사, 형용사



1. 체언

   - 문장에서 몸통, 중심이 되는 역할 : 명사, 대명사, 수사

2. 수식언

   - 다른 말을 꾸며주는 역할 : 관형사, 부사

   - 관형사 : 체언 앞에 붙엉서 체언을 꾸며주는 것 :'새'책, 옛 등등

   - 부사 : 용언 앞에서 내용을 꾸며주거나 문장 전체를 꾸밈 : 동사나 형용사를 의미

     ㄴ> '매우', '반드시'.'잘'

3. 관계언

   - 조사

4. 독립언

   - 감탄사

5. 용언

   - 서술어 기능 : 동사, 형용사



##### 구(Phrase)



1. 영어 분석에 많이 사용
2. 문장(S)
   - She looked at the dog with one eye : 명사구 + 동사구 + 전치사구
   - The rat eats cheese : 명사구 + 동사구 + 명사구



##### 단어 주머니(bag or words) 접근법



NLP를 할 때 두 가지 접근법 중 하나



하나의 문서를 그 문서를 포함하고 있는 WORD들의 BAG 으로 다루는 것

A라는 문서 존재, A문서를 포함하고 있는 WORD집합의 BAG으로 다룬다.



=> 어떤 단어들이 출현하는 빈도수만 고려하기 때문에 단순하고 편해서 많이 사용된다.



문제점 :  빈도수로만 분석하기 때문에 아래와 같은 오류가 발생



`Man eats fish`

`Fish eats man` 



둘의 단어 빈도수를 비교해보면 의미는 다르지만 빈도수가 똑같아서 똑같은 분석 결과를 내놓을 수 있다.





##### 이해(Understanding) 접근법



NLP를 할 때 두 가지 접근법 중 하나



각 단어의 의미가 무엇인지, 문서 내용이 무엇인지 실제로 이해하려고 시도함





`단어주머니접근법 vs 이해 접근법`



<hr>



### 자연어처리 기본 패키지



영문 패키지와 한글 패키지로 나뉨



> nltk : 영어
>
> konlpy :  한글



<hr>

##### nltk 설치



Natural Language Toolkit

영어 텍스트 전처리에 가장 많이 사용



아나콘다 프롬프트 관리자 실행해서 말풍선 까지 다운



설치 확인

```python
from nltk.tokenize import word_tokenize 
#문장이 주어지면 그 문장의 단어들을 토큰으로 만들어서 구분해서 리스트로 반환하는 함수
#(리스트 반환)

from nltk.tokenize import sent_tokenize
#문장들을 구분해주는 역할을 하는 것 (리스트 반환)

```



<hr>

##### konlpy 설치



 한글 자연어 처리 라이브러리

기존 다른 형태소 분석기 사용 가능



##### konlpy 사용



1. `okt.morphs()` 
   - 텍스트를 형태소 단위로 나눔
2. `okt.nouns()`
   - 명사 추출
3. `okt.phrases()`
   - 어절 추출
4. `okt.pos()`
   - 품사 태깅







